#--------------------------------------------------------------------------------------------------------------
#--------------------------------------------------------------------------------------------------------------
# Name: edo_demo_release
# Description: edo_demo_release
#--------------------------------------------------------------------------------------------------------------
#--------------------------------------------------------------------------------------------------------------

#--------------------------------------------------------------------------------------------------------------
#
# Begin edo_demo_release make targets
#
#--------------------------------------------------------------------------------------------------------------

#--------------------------------------------------------------------------------------------------------------
# setup
#--------------------------------------------------------------------------------------------------------------
# Build dependencies
#--------------------------------------------------------------------------------------------------------------
docker/edo_demo_release/setup: bazel/build
	if [ -d "docker-bin" ]; then rm -Rf docker-bin; fi && mkdir docker-bin
	cp bazel-bin/apps/smoke_test/src/smoke_test docker-bin/smoke_test


#--------------------------------------------------------------------------------------------------------------
# build
#--------------------------------------------------------------------------------------------------------------
# Build the edo_demo_release docker image
#--------------------------------------------------------------------------------------------------------------
docker/edo_demo_release/build: docker/edo_demo_base/build docker/edo_demo_release/setup
	docker build -f docker/edo_demo_release/edo_demo_release.Dockerfile -t edo_demo_release:latest .

#--------------------------------------------------------------------------------------------------------------
# run
#--------------------------------------------------------------------------------------------------------------
# Run to the edo_demo_release docker image
#--------------------------------------------------------------------------------------------------------------
docker/edo_demo_release/run: docker/edo_demo_release/build
	docker run -it --entrypoint /bin/bash edo_demo_release:latest


#--------------------------------------------------------------------------------------------------------------
#
# End edo_demo_release make targets
#
#--------------------------------------------------------------------------------------------------------------
